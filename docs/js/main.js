!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);function o(e){history.replaceState(null,null," "),r(p,y),e.avatar&&(document.getElementById("user-avatar").src=e.avatar),document.getElementById("user-name").innerHTML=`Hello ${e.login}`,document.getElementById("date").innerText=(new Date).toLocaleString("en-US",{dateStyle:"medium"}),function(e,t){new MutationObserver((function(t){t.forEach((function(t){for(let t of document.getElementsByClassName("task-close"))t.onclick=function(t){let n=e.tasks.findIndex(e=>e.id===t.target.parentElement.getAttribute("id"));e.tasks.splice(n,1),t.target.parentNode.remove(),a()};for(let t of document.getElementsByClassName("checkmark"))t.onclick=function(t){let n=t.target.parentElement.parentElement;e.tasks.find(e=>e.id===n.getAttribute("id")).status=c(t.target)}}))})).observe(t,{childList:!0})}(e,document.getElementById("tasks"));for(let t of e.tasks)l(t.task,t.status,t.id);d("new"),a(),g.style.display="none"}let s;function i(){window.innerHeight>500&&document.documentElement.style.setProperty("--vh",`${window.innerHeight/100}px`)}function a(){let e=document.getElementsByClassName("new").length;document.getElementById("new-tasks-num").innerText=0==e?"no tasks":1==e?e+" task":e+" tasks"}function l(e,t){let n=`<label class="task__mark">\n                                    <input type="checkbox" >\n                                    <span class="checkmark"></span>\n                            </label>\n                            <p class="task__text">${e}</p>\n                            <img src="assets/img/close.svg" alt="remove task" class="task-close">`,o=document.getElementById("tasks").insertAdjacentElement("afterbegin",document.createElement("li"));return o.classList.add("task",t),o.innerHTML=n,o.setAttribute("id",function e(){let t=Math.floor(1e4*Math.random());for(let n of document.getElementsByClassName("task")){if(n.getAttribute("id")!==t.toString())return t.toString();e()}}()),o}function r(e,t){e.style.display="grid",t.style.display="none",e==y?(!function(){const e=document.getElementById("tasks");for(;e.firstChild;)e.removeChild(e.firstChild)}(),f.classList.add("login")):f.classList.remove("login")}function c(e){let t,n=e.parentElement.parentElement;return n.classList.contains("new")?(n.classList.remove("new"),n.classList.add("done"),t="done"):n.classList.contains("done")&&(n.classList.remove("done"),n.classList.add("new"),t="new"),a(),t}function d(e){for(let t of document.getElementsByClassName("task"))t.style.display="none",t.classList.contains(e)&&(t.style.display="flex")}m("binID")?m("signed-out")?document.getElementById("user-login").value=m("login"):b().then(e=>{s=e,o(s)}):g.style.display="none",function(){let e=document.getElementsByClassName("quote");e[Math.floor(Math.random()*e.length)].style.display="flex"}(),window.addEventListener("resize",i),window.addEventListener("orientationchange",i),i(),document.getElementById("add-task").onclick=function(e){let t=document.getElementById("new-task");if(""===t.value)return I(t,"This field should not be empty."),!1;{let e=l(t.value,"new");if(s){s.tasks.push({id:e.getAttribute("id"),task:t.value,status:"new"}),console.log(s)}document.getElementById("new-task").value="",document.getElementById("new-task").placeholder="What is your task for today? ",a(),""!==I&&I(t," ")}},document.getElementById("all-tasks").onclick=function(e){d("task")},document.getElementById("to-do-tasks").onclick=function(e){d("new")},document.getElementById("done-tasks").onclick=function(e){d("done")},document.getElementById("save-tasks").onclick=function(e){B(s).then(t=>e.target.innerText="Your tasks successfully saved")},document.getElementById("close-all-tasks").onclick=function(e){s.tasks=[],B(s).then(t=>e.target.innerText="Your tasks successfully removed")};let u=new Date(0).toUTCString();function m(e){let t;return document.cookie.split("; ").map(e=>e.split("=")).map(n=>n[0]===e?t=n[1]:null),t}const g=document.getElementById("preloader"),f=document.getElementById("login-page"),y=document.getElementById("login-container"),p=document.getElementById("account-container"),h="https://api.jsonbin.io/b",k=m("binID")?`${h}/${m("binID")}`:null,E="$2b$10$pDq3QtKfrwesrxwQ59aWIOvaglvZRlTC5HODRHABUQ/1xwYjGf.1m";function v(e,t){let n=fetch("https://api.jsonbin.io/b/5f3ea46bb88c04101cf83396",{headers:{"secret-key":E}}).then(e=>e.json()).then(e=>e.users);console.log(n)}function b(){return fetch(k,{headers:{"secret-key":E}}).then(e=>e.json())}function B(e){return fetch(k,{method:"PUT",headers:{"Content-Type":"application/json","secret-key":E,versioning:!1},body:JSON.stringify(e)})}let w;function I(e,t){return e.nextElementSibling.innerText=t}function x(e){e.files[0]&&(e.files[0].size/1024>300?I(e,"Big size of image. Please upload max 300kB"):"image"!=e.files[0].type.split("/")[0]?I(e,"Not an image. Please upload only images"):function(e){I(e,""),document.getElementById("user-photo").src=URL.createObjectURL(e.files[0])}(e))}function T(e){""===e.value?I(e,"This field is required."):e.value.length<8?I(e,"Password should contain as minimum 8 characters"):e.value.match(/[a-z]+/)?e.value.match(/[A-Z]+/)?e.value.match(/\d+/)?I(e,""):I(e,"Password should contain as minimum 1 digit"):I(e,"Password should contain as minimum 1 latin letter in upper register"):I(e,"Password should contain as minimum 1 latin letter in low register")}document.getElementById("avatar").onchange=function(e){x(e.target);let t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=function(e){w=e.target.result}},document.getElementById("login").onchange=function(e){e.target.value?b(e.target.value).then(t=>{t.error?I(e.target,""):I(e.target,"Sorry, but this login is already occupied by another user. ")}):I(e.target,"This field is required")},document.getElementById("password").oninput=function(e){T(e.target)},document.getElementById("registration-btn").onclick=function(e){const t={};let n=document.getElementById("avatar"),s=document.getElementById("login"),i=document.getElementById("password"),a=[];if(0!=function(e){const t=e.getElementsByTagName("input");for(let e of t)if("login"==e.id?""===e.value&&I(e,"This field is required."):"avatar"==e.id?x(e):"password"==e.id&&T(e),0!=e.nextElementSibling.textContent.length)var n=!1;return n}(document.getElementById("registration-form"))){n.files[0]?t[n.name]=w:t[n.name]=!1,t[s.name]=s.value;let e=Sha256.hash(i.value);t[i.name]=e,t.tasks=a,(l=t,fetch(h,{method:"POST",headers:{"Content-Type":"application/json","secret-key":E,"X-Collection-Id":"5f1acd08c58dc34bf5d9cd33",name:l.login},body:JSON.stringify(l)}).then(e=>e.json())).then(e=>{o(t),function(e,t){document.cookie=`login=${e.login}`,document.cookie=`binID=${t}`,document.cookie="signed-out=; expires="+u}(t,e.id),v(t.login,e.id)})}var l};let S=document.getElementById("sign-in-form").getElementsByTagName("input");document.getElementById("sign-in-btn").onclick=function(e){let t=document.getElementById("user-login");document.getElementById("user-password");for(let e of S)""==e.value&&I(e,"This field is required");t.value&&b(t.value).then(()=>{I(t,"Sorry, we can not find user with such login")})};for(let e of document.getElementsByClassName("eye"))e.onclick=function(e){let t=e.target.nextElementSibling;"password"===t.type?t.type="text":t.type="password"};document.getElementById("sign-out").onclick=function(e){r(y,p),document.cookie="signed-out=true"}}]);